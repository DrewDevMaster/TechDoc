//
//  GCD vs OperationQueue.swift
//  TechAddicted
//
//  Created by ViktorM1Max on 19.06.2025.
//

import Foundation


/*
 Operation/OperationQueue –∏ GCD (Grand Central Dispatch) ‚Äî —ç—Ç–æ –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ —Ä–∞–±–æ—Ç—ã —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é –≤ iOS. –û–Ω–∏ –æ–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á, –Ω–æ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –ø–æ —É—Ä–æ–≤–Ω—é –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏, –≥–∏–±–∫–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—é.

 ‚∏ª

 üß† –ì–ª–∞–≤–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ:

                        GCD (Grand Central Dispatch)                 OperationQueue / Operation
 ‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª
 –£—Ä–æ–≤–µ–Ω—å                        –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π                             –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π
 –¢–∏–ø –∑–∞–¥–∞—á                      –ë–ª–æ–∫–∏ (closure)                        –ö–ª–∞—Å—Å—ã-–Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ Operation –∏–ª–∏ –±–ª–æ–∫–∏
 –û—Ç–º–µ–Ω–∞                         ‚ùå –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –æ—Ç–º–µ–Ω—ã             ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
 –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏                    ‚ùå –ù–µ—Ç                               ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏
 –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ        ‚ùå                                   ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Operation
 –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è                   ‚ùå –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è                       ‚úÖ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å main, isReady –∏ —Ç. –¥.
 –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã                     ‚úÖ —á–µ—Ä–µ–∑ qos                         ‚úÖ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
 –ù–∞–±–ª—é–¥–µ–Ω–∏–µ                     ‚ùå                                   ‚úÖ KVO –∏ –±–ª–æ–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è


 ‚∏ª

 üîß –ü—Ä–∏–º–µ—Ä—ã

 ‚úÖ GCD:

 DispatchQueue.global(qos: .background).async {
     // —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
     DispatchQueue.main.async {
         // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
     }
 }

 –ü—Ä–æ—Å—Ç–æ, –±—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ. –ù–æ –º–∞–ª–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.

 ‚∏ª

 ‚úÖ OperationQueue:

 let queue = OperationQueue()

 let operation1 = BlockOperation {
     print("Task 1")
 }

 let operation2 = BlockOperation {
     print("Task 2")
 }

 operation2.addDependency(operation1) // Task 2 –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ Task 1

 queue.addOperations([operation1, operation2], waitUntilFinished: false)

 –¢—ã –º–æ–∂–µ—à—å:
     ‚Ä¢    —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
     ‚Ä¢    –æ—Ç–º–µ–Ω—è—Ç—å –∑–∞–¥–∞—á–∏ (operation.cancel())
     ‚Ä¢    –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å (queue.isSuspended)
     ‚Ä¢    –¥–æ–±–∞–≤–ª—è—Ç—å KVO –∏–ª–∏ completion-–±–ª–æ–∫–∏

 ‚∏ª

 üß† –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ?

 –•–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å‚Ä¶                                            –ò—Å–ø–æ–ª—å–∑—É–π
 ‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª‚∏ª
 –ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –≤ —Ñ–æ–Ω                              GCD
 –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏                Operation
 –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã –∑–∞–¥–∞—á                                   Operation
 –¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—á–µ—Ä–µ–¥–∏                                   Operation
 –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å –º–∏–Ω–∏–º—É–º–æ–º –∫–æ–¥–∞           GCD


 ‚∏ª

 üí° –í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö:
     ‚Ä¢    GCD –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á: –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö, UI-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –∞–Ω–∏–º–∞—Ü–∏–∏.
     ‚Ä¢    OperationQueue —Ö–æ—Ä–æ—à–∞ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏: –ø–∞—Ä—Å–∏–Ω–≥, –∑–∞–≥—Ä—É–∑–∫–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—á–µ—Ä–µ–¥–∏ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ç. –¥.
 
 */
